sudo: required
dist: xenial
language: c++
compiler:
  - gcc
  - clang

install:
  - sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 1397BC53640DB551
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo add-apt-repository --yes ppa:beineri/opt-qt5x-xenial
  - sudo apt-get update
  - sudo apt-get install -qq g++-6 qt58-meta-full
  - sudo ls
  - sudo pwd
#  - sudo chmod +x scripts/prep.sh  - sudo scripts/prep.sh


before_script:
  - QT_ENV_SCRIPT=$(find /opt -name 'qt*-env.sh')
  - source $QT_ENV_SCRIPT

script:
  - mkdir build
  - cd build
  - sudo touch ../local_overrides.pri
  - qmake -project
  - qmake ../OctoMY.pro
  - make


notifications:
  email:
    recipients:
      - lennartrolland@gmail.com
    on_success: change
    on_failure: always
  irc:
    channels:
      - "irc.freenode.net:8001#octomy"
    on_success: change
    on_failure: always
    template:
      - "%{repository} (%{commit}) : %{message} %{foo} "
      - "Build details: %{build_url}"
